window.Bizweb||(window.Bizweb={}),Bizweb.SearchOperators={OR:"OR",AND:"AND",NOT:"NOT"},Bizweb.SearchField=function(){function e(e){this.name=e,this.values=[]}return e.prototype.addValue=function(e,t){this.values.push({value:e,operator:t})},e.prototype.deleteValue=function(e,t){let r=-1;for(let i=0;i<this.values.length;i+=1)this.values[i].value===e&&this.values[i].operator===t&&(r=i);this.values.splice(r,1)},e.prototype.deleteValuePriceRange=function(e,t){var r=-1;for(let i=0;i<this.values.length;i++)this.values[i].value===e&&this.values[i].operator===t&&(r=i);r>-1&&this.values.splice(r,1)},e.prototype.buildParam=function(){let e,t="";for(e=0;e<this.values.length;e+=1)t+=0===e?this.values[e].value:this._buildValue(this.values[e]);return this.values.length>1&&(t="("+t+")"),""!==t?this.name+":"+t:null},e.prototype._buildValue=function(e){switch(e.operator.toUpperCase()){case Bizweb.SearchOperators.OR:return" OR "+e.value;case Bizweb.SearchOperators.AND:return" AND "+e.value;case Bizweb.SearchOperators.NOT:return" -"+e.value;default:return" "+e.value}},e.name="SearchField",e}(),Bizweb.SearchFilter=function(){function e(){this.fields={}}return e.prototype.addValue=function(e,t,r,i){return this.findOrCreateField(e,t).addValue(r,i)},e.prototype.findOrCreateField=function(e,t){let r=this.fields[e];return r||(r=new Bizweb.SearchField(t),this.fields[e]=r),r},e.prototype.deleteValue=function(e,t,r,i){return this.findOrCreateField(e,t).deleteValue(r,i)},e.prototype.deleteValuePriceRange=function(e,t,r,i){return this.findOrCreateField(e,t).deleteValue(r,i)},e.prototype.deleteGroup=function(e){delete this.fields[e]},e.prototype.search=function(e){e||(e={});let t=this.buildSearchUrl(e);return mewService.getFilter(t)},e.prototype.buildSearchUrl=function(e){e||(e={});let t=this._buildSearchUrl();return e.view&&(t+="&view="+e.view),e.page&&(t+="&page="+e.page),e.sortby&&(t+="&sortby="+e.sortby),t},e.prototype._buildSearchUrl=function(){let e="/search?q=",t="";for(group in this.fields){let e=this.fields[group].buildParam();e&&(t+=e+" AND ")}return t.length>5&&(t=t.slice(0,-5)),e+=t},e.containsOperator=function(e){return e.indexOf(Bizweb.SearchOperators.OR)>0||e.indexOf(Bizweb.SearchOperators.AND)>0},e.name="SearchFilter",e}();